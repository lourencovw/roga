{"openapi":"3.0.0","info":{"title":"Documentation","version":"1.0.0","description":"My application with swagger docs"},"paths":{"version":{"0":"3"},"services":{"mssql":{"image":"microsoft/mssql-server-linux:2017-latest","ports":["31433:1433"],"environment":["ACCEPT_EULA=Y","SA_PASSWORD=S0meVeryHardPassword"],"healthcheck":{"test":"/opt/mssql-tools/bin/sqlcmd -S mssql -U sa -P 'S0meVeryHardPassword' -Q 'select 1'"}},"waitmssql":{"image":"mcr.microsoft.com/mssql/server:2017-latest","links":["mssql"],"depends_on":["mssql"],"entrypoint":["bash","-c","until /opt/mssql-tools/bin/sqlcmd -S mssql -U sa -P S0meVeryHardPassword -d master -Q \"CREATE DATABASE knex_test; ALTER DATABASE knex_test SET ALLOW_SNAPSHOT_ISOLATION ON; ALTER DATABASE knex_test SET DELAYED_DURABILITY = FORCED\"; do sleep 5; done"]},"mysql":{"image":"mysql:5.7","command":"--default-authentication-plugin=mysql_native_password --sync_binlog=0 --innodb_doublewrite=OFF  --innodb-flush-log-at-trx-commit=0 --innodb-flush-method=nosync","ports":["33306:3306"],"environment":["TZ=UTC","MYSQL_ROOT_PASSWORD=mysqlrootpassword","MYSQL_USER=testuser","MYSQL_PASSWORD=testpassword"],"healthcheck":{"test":["CMD","/usr/bin/mysql","-hlocalhost","-utestuser","-ptestpassword","-e","SELECT 1"],"interval":"30s","timeout":"5s","retries":3},"restart":"always","volumes":["mysql_data:/var/lib/mysql"]},"waitmysql":{"image":"mysql","links":["mysql"],"depends_on":["mysql"],"entrypoint":["bash","-c","until /usr/bin/mysql -hmysql -utestuser -ptestpassword -e \"SELECT 1\"; do sleep 5; done"]},"postgres":{"image":"postgres:13-alpine","command":"-c full_page_writes=off -c fsync=off -c synchronous_commit=off","ports":["25432:5432"],"environment":["POSTGRES_USER=testuser","POSTGRES_PASSWORD=knextest","POSTGRES_DB=knex_test"]},"waitpostgres":{"image":"postgres:13-alpine","links":["postgres"],"depends_on":["postgres"],"entrypoint":["bash","-c","until /usr/local/bin/psql postgres://testuser:knextest@postgres/knex_test -c \"SELECT 1\"; do sleep 5; done"]},"cockroachdb":{"image":"cockroachdb/cockroach:latest-v21.2","container_name":"crdb","hostname":"crdb","command":"start-single-node --cluster-name=example-single-node --insecure","ports":["26257:26257","8080:8080"]},"waitcockroachdb":{"container_name":"crdb-init","hostname":"crdb-init","image":"timveil/cockroachdb-remote-client:latest","environment":["COCKROACH_HOST=crdb:26257","COCKROACH_INSECURE=true","DATABASE_NAME=test"],"depends_on":["cockroachdb"]},"pgnative":{"image":"mdillon/postgis","command":"-c full_page_writes=off -c fsync=off -c synchronous_commit=off","ports":["35433:5432"],"environment":["POSTGRES_PASSWORD=postgresrootpassword","POSTGRES_USER=postgres","POSTGRES_DB=knex_test"]},"waitpgnative":{"image":"postgres:13-alpine","links":["pgnative"],"depends_on":["pgnative"],"entrypoint":["bash","-c","until /usr/local/bin/psql postgres://testuser:knextest@pgnative/knex_test -c \"SELECT 1\"; do sleep 5; done"]},"oracledb":{"image":"quillbuilduser/oracle-18-xe","container_name":"oracledb_container","ports":["31521:1521"],"environment":["ORACLE_ALLOW_REMOTE=true"]},"waitoracledb":{"image":"quillbuilduser/oracle-18-xe","links":["oracledb"],"depends_on":["oracledb"],"environment":["ORACLE_HOME=/opt/oracle/product/18c/dbhomeXE"],"entrypoint":["bash","-c","until /opt/oracle/product/18c/dbhomeXE/bin/sqlplus -s sys/Oracle18@oracledb/XE as sysdba <<< \"SELECT 13376411 FROM DUAL; exit;\" | grep \"13376411\"; do echo \"Could not connect to oracle... sleep for a while\"; sleep 5; done"]},"toxiproxy":{"image":"shopify/toxiproxy","ports":["8474:8474","23306:23306","25432:25432","25433:25433","21521:21521","21433:21433"],"links":["mysql","postgresql","pgnative","oracledb","mssql"]},"postgresql":{"image":"mdillon/postgis","ports":["35432:5432"],"environment":["POSTGRES_PASSWORD=postgresrootpassword","POSTGRES_USER=postgres"]},"app":{"build":{"context":".","dockerfile":"Dockerfile"},"ports":["3333:3333"],"env_file":"./.env","volumes":[".:/app","/app/node_modules"],"depends_on":["mysql_server"]},"mysql_server":{"image":"mysql:8.0","env_file":"./.env","command":"--init-file /data/application/init.sql","environment":["MYSQL_DATABASE=$MYSQL_DB_NAME","MYSQL_USER=$MYSQL_USER","MYSQL_PASSWORD=$MYSQL_PASSWORD","MYSQL_ROOT_PASSWORD=$MYSQL_PASSWORD"],"ports":["$MYSQL_PORT:$MYSQL_PORT"],"volumes":["db:/var/lib/mysql","./init.sql:/data/application/init.sql"]}},"volumes":{"mysql_data":{"driver_opts":{"type":"tmpfs","device":"tmpfs"}},"db":null},"security":{"0":{"bearerAuth":[]}},"/login":{"post":{"tags":["Auth"],"summary":"Sign in a user","description":"Sign in a user","operationId":"signInUser","requestBody":{"description":"Create a new user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Auth"}}},"required":true},"produces":["application/json"],"responses":{"200":{"description":"Success"}}}},"/register":{"post":{"tags":["Auth"],"summary":"Register a new user","description":"Register a new user","operationId":"registerUser","requestBody":{"description":"Create a new user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Auth"}}},"required":true},"produces":["application/json"],"responses":{"200":{"description":"Success"}}}},"/notes/{noteId}":{"delete":{"tags":["Notes"],"security":[{"bearerAuth":[]}],"summary":"Delete a note","description":"This can only be done by the logged in user.","operationId":"deleteNote","parameters":[{"name":"noteId","in":"path","description":"ID of note to be deleted","required":true,"schema":{"type":"integer","format":"int64"}}],"produces":["application/json"],"responses":{"200":{"description":"Success"}}},"put":{"tags":["Notes"],"security":[{"bearerAuth":[]}],"summary":"Update note","description":"This can only be done by the logged in user.","operationId":"updateNote","requestBody":{"description":"Update an existent note","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Note"}}}},"parameters":[{"name":"noteId","in":"path","description":"ID of note to return","required":true,"schema":{"type":"integer","format":"int64"}}],"produces":["application/json"],"responses":{"200":{"description":"Success"}}},"get":{"tags":["Notes"],"security":[{"bearerAuth":[]}],"summary":"Find note by ID","description":"Returns a single note","operationId":"getNoteById","parameters":[{"name":"noteId","in":"path","description":"ID of note to return","required":true,"schema":{"type":"integer","format":"int64"}}],"produces":["application/json"],"responses":{"200":{"description":"Success"}}}},"/notes":{"get":{"tags":["Notes"],"security":[{"bearerAuth":[]}],"summary":"List notes","description":"Returns all notes","operationId":"getNotes","produces":["application/json"],"responses":{"200":{"description":"Success"}}},"post":{"tags":["Notes"],"security":[{"bearerAuth":[]}],"summary":"Create a new note","description":"Create a new note","operationId":"createNote","requestBody":{"description":"Create a new note","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Note"}}},"required":true},"produces":["application/json"],"responses":{"200":{"description":"Success"}}}},"/people/{personId}":{"delete":{"tags":["People"],"security":[{"bearerAuth":[]}],"summary":"Update person","description":"This can only be done by the logged in user.","operationId":"deletePerson","parameters":[{"name":"personId","in":"path","description":"ID of person to be deleted","required":true,"schema":{"type":"integer","format":"int64"}}],"produces":["application/json"],"responses":{"200":{"description":"Success"}}},"put":{"tags":["People"],"security":[{"bearerAuth":[]}],"summary":"Update person","description":"This can only be done by the logged in user.","operationId":"updatePerson","requestBody":{"description":"Update an existent user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Person"}}}},"parameters":[{"name":"personId","in":"path","description":"ID of person to return","required":true,"schema":{"type":"integer","format":"int64"}}],"produces":["application/json"],"responses":{"200":{"description":"Success"}}},"get":{"tags":["People"],"security":[{"bearerAuth":[]}],"summary":"Find person by ID","description":"Returns a single person","operationId":"getPersonById","parameters":[{"name":"personId","in":"path","description":"ID of person to return","required":true,"schema":{"type":"integer","format":"int64"}}],"produces":["application/json"],"responses":{"200":{"description":"Success"}}}},"/people":{"get":{"tags":["People"],"security":[{"bearerAuth":[]}],"summary":"List people","description":"Returns all people","operationId":"getPeople","produces":["application/json"],"responses":{"200":{"description":"Success"}}},"post":{"tags":["People"],"security":[{"bearerAuth":[]}],"summary":"Create a new person","description":"Create a new person","operationId":"createPerson","requestBody":{"description":"Create a new person","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Person"}}},"required":true},"produces":["application/json"],"responses":{"200":{"description":"Success"}}}},"environment":{"matrix":[{"nodejs_version":"8"}]},"install":{"0":{"ps":"Install-Product node $env:nodejs_version"},"1":"set CI=true","2":"npm install --global npm@latest","3":"set PATH=%APPDATA%\\npm;%PATH%","4":"npm install"},"matrix":{"fast_finish":true},"build":{"0":"o","1":"f","2":"f"},"shallow_clone":{},"test_script":{"0":"node --version","1":"npm --version","2":"npm run test-no-coverage"},"cache":{"0":"%APPDATA%\\npm-cache"}},"components":{"schemas":{"Auth":{"type":"object","properties":{"email":{"type":"string","example":"john@gmail.com"},"password":{"type":"string","example":"12345"}}},"Note":{"type":"object","properties":{"title":{"type":"string","example":"Note Title"},"description":{"type":"string","example":"Note description."},"person":{"type":"integer","format":"int64","example":10}}},"Person":{"type":"object","properties":{"name":{"type":"string","example":"John"},"mother_name":{"type":"string","example":"Mary"},"father_name":{"type":"string","example":"Bob"},"cep":{"type":"string","example":"01001000"},"birthdate":{"type":"string","example":"2008-05-02"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}